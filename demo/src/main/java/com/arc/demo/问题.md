#为啥C1给server发消息，server 和C2都会打印

在上面提供的代码中，当客户端C1发送消息到服务器时，服务器会将接收到的消息广播给所有客户端，包括C2。这是因为服务器的 broadcastMessage 方法在接收到任何客户端的消息时，都会向所有客户端广播该消息。
´
如果你想要实现的是只有服务器将消息广播给除发送者之外的其他客户端，可以对服务器的 broadcastMessage 方法进行修改。以下是一个修改后的服务器代码，以实现这个功能：


```
// 服务器的 broadcastMessage 方法
private void broadcastMessage(String message, ClientHandler sender) {
    for (ClientHandler client : clients) {
        if (client != sender) {
            client.out.println("客户端 " + sender.getClientAddress() + " 说: " + message);
        }
    }
}

```


在上面的代码中，修改了 broadcastMessage 方法，它现在接受两个参数：消息和发送消息的客户端（sender）。然后，服务器只会将消息广播给除了发送者之外的其他客户端。

接下来，需要在 ClientHandler 类中添加一个方法来获取客户端的地址信息：

```
// 在 ClientHandler 类中添加一个方法来获取客户端的地址信息
public String getClientAddress() {
    return clientSocket.getInetAddress() + ":" + clientSocket.getPort();
}

```
现在，客户端C1发送消息时，只有服务器将消息广播给C2，反之亦然。其他客户端连接到服务器时，它们也会加入广播列表。






当客户端发送消息给服务器时， 
只有服务器能够看到该消息，而其他客户端不会看到。
当服务器发送消息给客户端时，只有目标客户端能够看到该消息，其他客户端不会看到。
同时，客户端之间也可以进行私聊，只有目标客户端能够看到私聊消息。

这样的需求可以通过以下方式实现：

客户端发送消息给服务器时，服务器将消息存储在私有队列中，不广播给其他客户端。
服务器发送消息给客户端时，只将消息发送到目标客户端的私有队列中。
客户端可以使用特定命令（例如，/private）发送私聊消息，服务器将私聊消息发送给目标客户端的私有队列中。
这种实现方式可以确保消息的隐私性和定向性，同时满足你的需求。


简单来说给予TCP的通信，有ABC三人

A-->B : A发消息给B，仅仅B能看，其他人不可以看因为是私聊
A-->C : A发消息给C，仅仅C能看，其他人不可以看因为是私聊
B-->A : B发消息给A，仅仅A能看，其他人不可以看因为是私聊
B-->C : B发消息给C，仅仅C能看，其他人不可以看因为是私聊
C-->A : C发消息给A，仅仅A能看，其他人不可以看因为是私聊
C-->B : C发消息给B，仅仅B能看，其他人不可以看因为是私聊

发消息之前需要选择目标人的ip端口



文件整理
我有一个目录有100多万文件，一共500多G大小，这个目录中存在多层目录，有的目录中是空的，有的目录中有文件
需求1:
计算出每个照片的hash值，这个hash值存在文件名称中，格式 "hash+___+文件原始名称"
例子: 0a04a65d53626d65bdeda4235a8249cb___DSC_000047.JPG
0a04a65d53626d65bdeda4235a8249cb 是hash值,  
___ 是分割线
DSC_000047.JPG 是照片的名称。

注意：
有的文件可能有500MB,
对于超过500MB的考虑可能会造成OOM异常，跳过处理，但是帮我移动的一个临时文件夹，以便于我手动整理
注意代码帮忙考虑下OOM的风险，我的虚拟机内存最大可以给到10G，
我的cpu核心数 8核，顺便给我下优化启动JVM的命令参数，我希望高效一点，有异常就跳过去
然后处理文件时候提示你帮我跳过mac系统自带的哪些无用的文件（特别小 或者 .开头的隐藏文件）

需求2:
然后我要做一件事情：hash值相同的文件的多个文件，如果大小也相同，我只想保留一份，
其余的文件帮我移动到备份文件夹，
保留一份的条件是留下名称最短的

语言用java，我是jdk11，给我一份完整的代码吧






target_dir="./del"; [ ! -d "$target_dir" ] && mkdir "$target_dir"; find . -type f -size +99M -exec mv {} "$target_dir" \; && echo "大于99MB的文件已经移动到$target_dir目录下。"


https://zhuanlan.zhihu.com/p/141245854